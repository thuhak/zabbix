# H3C 交换机模板


### 功能：

- 发现并监控cpu、内存的使用率
- 发现并监控端口的流量和错包
- 发现堆叠设备的硬件型号和序列号
- 监控生成树拓扑变化
- 监控生成树路径值
- 监控vlan数量
- 一张聚合图形


### 说明

#### 版本选择

h3c mib库主要有3个类型：

- 通用型：采用标准的RFC mib库
- 旧版mib: 很多旧型号(推测是comware V5版本，不确定)采用沿用华为的mib库
- 新版mib: 新型号(推测comware v7版本，不确定)采用hh3c的新版mib库

对于CPU、内存和一些私有扩展，新旧mib库有别。可以在进行网络发现时，通过检测特定的oid来确定链接哪个模板。例如：

- 自动发现检查 = 内网交换机发现: SNMPv2 客户端 ".1.3.6.1.4.1.25506.2.6.1.1.1.1.8.1" => 链接到模板: H3C交换机模板(新版专属)
- 自动发现检查 = 内网交换机发现: SNMPv2 客户端 ".1.3.6.1.4.1.2011.10.2.6.1.1.1.1.3.1" => H3C交换机模板(旧版专属)

#### 关于CPU、内存发现

cpu内存的编号是按照硬件的索引来定义的，没有同unit做到一起，不太清楚怎么弄。只能先凑合一下

#### 关于端口发现

端口发现时候，把处于关闭状态的端口过滤掉了。这样，长期不用的端口就不监控了，可以节约一些性能。

#### 关于拓扑变化

值的保存类型为差量而非速度，意味着不同的监控频度会有不同的差量。

#### 触发器和宏

默认包含3个宏：

- {$ERR_H}: 错包阈值
- {$SNMP_COMMUNITY}：团体字
- {$TOPCHANGE_H}：拓扑变化数量